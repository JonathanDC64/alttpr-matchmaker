{% extends "base.html" %}

{% block content %}

{% if error %}
<div class="notification is-danger">
    {{ error }}
</div>
{% else %}

<div class="columns">
    <div class="column">
        <div class="columns is-multiline">
            <div class="column is-12">
                <nav class="panel">
                    <p class="panel-heading">
                        Game Room : {{ room.id }}
                    </p>
                    <div class="panel-block">
                        <ul>
                            <li><strong>Seed URL: </strong><a href={{ room.get_seed_url() }}>{{ room.get_seed_url() }}</a></li>
                            <li><strong>Created by: </strong>{{ room.creator.name }}</li>
                            <li><strong>Players In Room: </strong>{{ room.players|length }}</li>
                            <li><strong>Difficulty: </strong>{{ room.settings.difficulty.description }}</li>
                            <li><strong>Goal: </strong>{{ room.settings.goal.description }}</li>
                            <li><strong>Mode: </strong>{{ room.settings.mode.description }}</li>
                            <li><strong>Variation: </strong>{{ room.settings.variation.description }}</li>
                            <li><strong>Weapons: </strong>{{ room.settings.weapons.description }}</li>


                            {% if room.settings.enemizer %}
                            <li><strong>Enemizer</strong></li>
                            {% endif %}

                            {% if room.settings.spoilers %}
                            <li><strong>Spoilers </strong></li>
                            {% endif %}

                            {% if room.settings.tournament %}
                            <li><strong>Tournament</strong></li>
                            {% endif %}

                            {#<li><strong>Seed Hash: </strong>{{ seed['hash'] }}</li>#}
                            <li><strong>Expires In: </strong>{{ room.get_expire_time() }}</li>
                        </ul>
                    </div>
                </nav>
            </div>
            <div class="column is-12">
                <a class="button is-primary is-fullwidth" href="/leave/{{ room.hash_code }}">Leave Room</a>
            </div>
            <div class="column is-12">
                <table class="table is-bordered is-striped is-hoverable is-fullwidth">
                    <thead>
                        <tr>
                            <th><abbr title="Players">Players</abbr></th>
                            <th><abbr title="Time">Time</abbr></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for player in room.players %}
                        <tr>
                            <td>{{ player.name }}</td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="column">
        <div id="tlkio" data-channel="alttpr_{{ room.hash_code }}" data-nickname="{{ player.name }}" style="width:100%;height:400px;"></div>
        <script async src="https://tlk.io/embed.js" type="text/javascript"></script>
    </div>
</div>

{% endif %}

{% endblock %}